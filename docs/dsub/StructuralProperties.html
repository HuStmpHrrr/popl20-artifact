<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../index.html"> Home </a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">StructuralProperties</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="OperationProperties.html#"><span class="id" title="library">OperationProperties</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab8"></a><h1 class="section">Structural Properties of Full D<sub>&lt;:</sub></h1>


<div class="paragraph"> </div>

    This file contains several structural properties, which are quite standard to prove.
    These structural properties include:
<ul class="doclist">
<li> weakening,

</li>
<li> narrowing, and

</li>
<li> substitution.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="StructuralProperties"><span class="id" title="section">StructuralProperties</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="weaken_typing_gen"><span class="id" title="lemma">weaken_typing_gen</span></a> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <a name="weaken_subty_gen"><span class="id" title="lemma">weaken_subty_gen</span></a> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">cofinite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reassoc</span> 4 <span class="id" title="keyword">with</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reassoc</span> 4 <span class="id" title="keyword">with</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHtyping</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">weaken_subty_gen</span>; <span class="id" title="tactic">trivial</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_trans"><span class="id" title="constructor">st_trans</span></a>; [ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsubty1</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsubty2</span>]; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_all"><span class="id" title="constructor">st_all</span></a>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reassoc</span> 4 <span class="id" title="keyword">with</span> 2. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel1"><span class="id" title="constructor">st_sel1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">weaken_typing_gen</span>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel2"><span class="id" title="constructor">st_sel2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">weaken_typing_gen</span>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="weaken_typing"><span class="id" title="definition">weaken_typing</span></a> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">reassoc</span> 2 <span class="id" title="keyword">with</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#weaken_typing_gen"><span class="id" title="lemma">weaken_typing_gen</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="weaken_subty"><span class="id" title="definition">weaken_subty</span></a> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">reassoc</span> 2 <span class="id" title="keyword">with</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#weaken_subty_gen"><span class="id" title="lemma">weaken_subty_gen</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">subst_open_comm_trm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">subst_open_comm_typ</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">to_substi</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&vdash; <span class="id" title="keyword">context</span>[<a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> (<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="notation">==</span> ?<span class="id" title="var">y</span> <span class="id" title="keyword">then</span> ?<span class="id" title="var">z</span> <span class="id" title="keyword">else</span> ?<span class="id" title="var">x</span>))] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> (<span class="id" title="keyword">if</span> <span class="id" title="var">x</span> <span class="id" title="notation">==</span> <span class="id" title="var">y</span> <span class="id" title="keyword">then</span> <span class="id" title="var">z</span> <span class="id" title="keyword">else</span> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="method">substi</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="subst_env"><span class="id" title="definition">subst_env</span></a> (<span class="id" title="var">z</span> <span class="id" title="var">u</span>: <span class="id" title="abbreviation">var</span>) (<span class="id" title="var">G</span> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a>) : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> := <span class="id" title="definition">map</span> (<span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="StructuralProperties.html#u"><span class="id" title="variable">u</span></a>) <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="SubstiEnv"><span class="id" title="instance">SubstiEnv</span></a> : <span class="id" title="class">CanSubst</span> <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> := { <span class="id" title="method">substi</span> := <a class="idref" href="StructuralProperties.html#subst_env"><span class="id" title="definition">subst_env</span></a> }.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="free_all"><span class="id" title="lemma">free_all</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span> (<span class="id" title="var">G</span> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a>; <span class="id" title="var">routine</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subst_trm_var"><span class="id" title="lemma">subst_trm_var</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x0</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="StructuralProperties.html#x0"><span class="id" title="variable">x0</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="notation">$</span> <a class="idref" href="OperationProperties.html#subst_fvar"><span class="id" title="definition">subst_fvar</span></a> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#x0"><span class="id" title="variable">x0</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">destruct_binds_hyp_uniq</span> <span class="id" title="var">H</span>; <span class="id" title="var">tidy_up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="StructuralProperties.html#subst_env"><span class="id" title="definition">subst_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_app_2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_map_2</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">exrewrite</span> <a class="idref" href="OperationProperties.html#subst_fresh_typ"><span class="id" title="lemma">subst_fresh_typ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#free_all"><span class="id" title="lemma">free_all</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">solve_notin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">fold_env</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&vdash; <span class="id" title="keyword">context</span>[?<span class="id" title="var">v</span> <span class="id" title="notation">~</span> <span class="id" title="method">substi</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">T</span> <span class="id" title="notation">++</span> <span class="id" title="method">substi</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">G</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">v</span> <span class="id" title="notation">~</span> <span class="id" title="method">substi</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">T</span> <span class="id" title="notation">++</span> <span class="id" title="method">substi</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="method">substi</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">v</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span> <span class="id" title="notation">++</span> <span class="id" title="var">G</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_by_weaken</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cofinite</span>; <span class="id" title="var">fold_substi</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">open_substi_transform</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reassoc</span> 3 <span class="id" title="keyword">with</span> 2; <span class="id" title="var">fold_env</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; <span class="id" title="var">routine</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#weaken_typing"><span class="id" title="definition">weaken_typing</span></a>; <span class="id" title="tactic">trivial</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">apply_ind</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; <span class="id" title="var">routine</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fold_subst_fvar</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &vdash; <span class="id" title="keyword">context</span>[<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="notation">==</span> ?<span class="id" title="var">y</span> <span class="id" title="keyword">then</span> ?<span class="id" title="var">z</span> <span class="id" title="keyword">else</span> ?<span class="id" title="var">x</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="keyword">if</span> <span class="id" title="var">x</span> <span class="id" title="notation">==</span> <span class="id" title="var">y</span> <span class="id" title="keyword">then</span> <span class="id" title="var">z</span> <span class="id" title="keyword">else</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="OperationProperties.html#subst_fvar"><span class="id" title="definition">subst_fvar</span></a> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="typing_subst_gen"><span class="id" title="lemma">typing_subst_gen</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <a name="subty_subst_gen"><span class="id" title="lemma">subty_subst_gen</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">typing_subst_gen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">gen</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#subst_trm_var"><span class="id" title="lemma">subst_trm_var</span></a>. <span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">solve_by_weaken</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">fold_substi</span>. <span class="id" title="var">fold_open_rec</span>. <span class="id" title="var">fold_subst_fvar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="OperationProperties.html#subst_open_comm_typ"><span class="id" title="lemma">subst_open_comm_typ</span></a>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHtyping1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHtyping2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHtyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">solve_by_weaken</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHtyping</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">subty_subst_gen</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">subty_subst_gen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">gen</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_trans"><span class="id" title="constructor">st_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHsubty1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHsubty2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#st_bnd"><span class="id" title="constructor">st_bnd</span></a>; [<span class="id" title="var">apply_ind</span> <span class="id" title="var">IHsubty1</span> | <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHsubty2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_all"><span class="id" title="constructor">st_all</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">apply_ind</span> <span class="id" title="var">IHsubty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">solve_by_weaken</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel1"><span class="id" title="constructor">st_sel1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">typing_subst_gen</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel2"><span class="id" title="constructor">st_sel2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">typing_subst_gen</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="typing_subst"><span class="id" title="lemma">typing_subst</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">G</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">change</span> <span class="id" title="var">G</span> <span class="id" title="keyword">with</span> (<span class="id" title="method">substi</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="constructor">nil</span> <span class="id" title="notation">++</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#typing_subst_gen"><span class="id" title="lemma">typing_subst_gen</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subty_subst"><span class="id" title="lemma">subty_subst</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span> <span class="id" title="var">G</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <span class="id" title="method">substi</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">change</span> <span class="id" title="var">G</span> <span class="id" title="keyword">with</span> (<span class="id" title="method">substi</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="constructor">nil</span> <span class="id" title="notation">++</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#subty_subst_gen"><span class="id" title="lemma">subty_subst_gen</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">prelude</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">erewrite</span> <a class="idref" href="OperationProperties.html#subst_intro_typ"><span class="id" title="lemma">subst_intro_typ</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">erewrite</span> <a class="idref" href="OperationProperties.html#subst_intro_trm"><span class="id" title="lemma">subst_intro_trm</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fin</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#typing_subst"><span class="id" title="lemma">typing_subst</span></a> || <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#subty_subst"><span class="id" title="lemma">subty_subst</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">routine</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">simpl</span>; <span class="id" title="var">fold_substi</span>; <span class="id" title="var">fold_open_rec</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eexrewrite</span> <a class="idref" href="OperationProperties.html#subst_fresh_typ"><span class="id" title="lemma">subst_fresh_typ</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">routine</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="renaming_trm"><span class="id" title="lemma">renaming_trm</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">z</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> (<span class="id" title="var">x</span> : <span class="id" title="abbreviation">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>. <span class="id" title="var">prelude</span>; <span class="id" title="var">fin</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="renaming_subty"><span class="id" title="lemma">renaming_subty</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">z</span> <span class="id" title="var">T</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span> (<span class="id" title="var">x</span> : <span class="id" title="abbreviation">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">prelude</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="OperationProperties.html#subst_intro_typ"><span class="id" title="lemma">subst_intro_typ</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">U</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">fin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="renaming_fresh"><span class="id" title="lemma">renaming_fresh</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">u</span> <span class="id" title="var">U</span> (<span class="id" title="var">x</span> : <span class="id" title="abbreviation">var</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <a class="idref" href="StructuralProperties.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>. <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">z</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick_fresh</span> <span class="id" title="var">z</span>; <span class="id" title="var">prelude</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">z</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">eexrewrite</span> &lt;- <a class="idref" href="OperationProperties.html#subst_fresh_typ"><span class="id" title="lemma">subst_fresh_typ</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="open_subst_typing"><span class="id" title="lemma">open_subst_typing</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <span class="id" title="var">U</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="abbreviation">singleton</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#renaming_trm"><span class="id" title="lemma">renaming_trm</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">z</span> := <span class="id" title="var">x</span>) (<span class="id" title="var">U</span> := <span class="id" title="var">S</span>); <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#weaken_typing_gen"><span class="id" title="lemma">weaken_typing_gen</span></a>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="open_subst_subty"><span class="id" title="lemma">open_subst_subty</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span> <span class="id" title="var">G</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U1"><span class="id" title="variable">U1</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U1"><span class="id" title="variable">U1</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="StructuralProperties.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="abbreviation">singleton</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="StructuralProperties.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="StructuralProperties.html#U2"><span class="id" title="variable">U2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#renaming_subty"><span class="id" title="lemma">renaming_subty</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">z</span> := <span class="id" title="var">x</span>) (<span class="id" title="var">T</span> := <span class="id" title="var">S</span>); <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#weaken_subty_gen"><span class="id" title="lemma">weaken_subty_gen</span></a>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Reserved Notation</span> &quot;G1 ⪯ G2" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="subenv"><span class="id" title="inductive">subenv</span></a>: <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="subenv_empty"><span class="id" title="constructor">subenv_empty</span></a> : <span class="id" title="constructor">nil</span> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <span class="id" title="constructor">nil</span><br/>
&nbsp;&nbsp;| <a name="subenv_grow"><span class="id" title="constructor">subenv_grow</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">G'</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T'"><span class="id" title="variable">T'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T'"><span class="id" title="variable">T'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">where</span> <a name="26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">&quot;</span></a>G1 ⪯ G2" := (<a class="idref" href="StructuralProperties.html#subenv"><span class="id" title="inductive">subenv</span></a> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="StructuralProperties.html#subenv"><span class="id" title="inductive">subenv</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subenv_refl"><span class="id" title="lemma">subenv_refl</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span>, <span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">G</span>; <span class="id" title="var">eroutine</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">subenv_refl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subenv_push"><span class="id" title="lemma">subenv_push</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">G1</span>; <span class="id" title="var">eroutine</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">subenv_push</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Extern</span> 1 =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="inductive">uniq</span> <span class="id" title="var">_</span> &vdash; <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Extern</span> 1 =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="var">_</span> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <span class="id" title="var">_</span> &vdash; <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subenv_last"><span class="id" title="lemma">subenv_last</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#S"><span class="id" title="variable">S</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <span class="id" title="notation">(</span><a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="StructuralProperties.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">routine</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">subenv_last</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="subenv_implies_uniq"><span class="id" title="lemma">subenv_implies_uniq</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">/\</span> <span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G2"><span class="id" title="variable">G2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">routine</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Extern</span> 1 =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ &vdash; <span class="id" title="var">_</span> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">_</span> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;| [ &vdash; <span class="id" title="var">_</span> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">_</span> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="var">reassoc</span> 2 <span class="id" title="keyword">with</span> 0.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Extern</span> 1 =&gt; <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#weaken_typing"><span class="id" title="definition">weaken_typing</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Extern</span> 1 =&gt; <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#weaken_subty"><span class="id" title="definition">weaken_subty</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="narrow_var"><span class="id" title="lemma">narrow_var</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">G'</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_var"><span class="id" title="constructor">trm_var</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="StructuralProperties.html#subenv"><span class="id" title="inductive">subenv</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="notation">(</span><span class="id" title="var">x</span> <span class="id" title="notation">,</span> <span class="id" title="var">T'</span><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <span class="id" title="var">G'</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">T'</span> <span class="id" title="notation">++</span> <span class="id" title="var">G'</span>) <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">binds_app_uniq_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H5</span>; <span class="id" title="var">tidy_up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="var">simpl_env</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ | <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#weaken_subty"><span class="id" title="definition">weaken_subty</span></a>; <span class="id" title="var">eassumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a name="narrowing"><span class="id" title="abbreviation">narrowing</span></a> <span class="id" title="var">ctor</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>, <span class="id" title="var">ctor</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ctor</span> <a class="idref" href="StructuralProperties.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">uniq_env</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">H</span> : <span class="id" title="var">_</span> <a class="idref" href="StructuralProperties.html#26036e335d940581eae018f32c4fe0e2"><span class="id" title="notation">⪯</span></a> <span class="id" title="var">_</span> &vdash; <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H0</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="StructuralProperties.html#subenv_implies_uniq"><span class="id" title="lemma">subenv_implies_uniq</span></a> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">solve_by_cofinite</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cofinite</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">solve_notin</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">trivial</span>; <span class="id" title="var">solve_notin</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="narrow_typing_gen"><span class="id" title="lemma">narrow_typing_gen</span></a> : <a class="idref" href="StructuralProperties.html#narrowing"><span class="id" title="abbreviation">narrowing</span></a> <a class="idref" href="Definitions.html#typing"><span class="id" title="inductive">typing</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <a name="narrow_subty_gen"><span class="id" title="lemma">narrow_subty_gen</span></a> : <a class="idref" href="StructuralProperties.html#narrowing"><span class="id" title="abbreviation">narrowing</span></a> <a class="idref" href="Definitions.html#subty"><span class="id" title="inductive">subty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">narrow_typing_gen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Definitions.html#typing"><span class="id" title="inductive">typing</span></a>; <span class="id" title="var">routine</span>; <span class="id" title="var">uniq_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#narrow_var"><span class="id" title="lemma">narrow_var</span></a>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">solve_by_cofinite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_by_cofinite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>. <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">narrow_subty_gen</span>; <span class="id" title="var">eassumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">narrow_subty_gen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Definitions.html#subty"><span class="id" title="inductive">subty</span></a>; <span class="id" title="var">routine</span>; <span class="id" title="var">uniq_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_trans"><span class="id" title="constructor">st_trans</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <span class="id" title="var">IHsubty1</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">IHsubty2</span>]; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_all"><span class="id" title="constructor">st_all</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">routine</span> | <span class="id" title="var">solve_by_cofinite</span> <span class="id" title="var">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel1"><span class="id" title="constructor">st_sel1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">narrow_typing_gen</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel2"><span class="id" title="constructor">st_sel2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">narrow_typing_gen</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="narrow_typing"><span class="id" title="lemma">narrow_typing</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="definition">dom</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Definitions.html#c41070cad499ba2696bc899ab500c90f"><span class="id" title="notation">:</span></a> <a class="idref" href="StructuralProperties.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#narrow_typing_gen"><span class="id" title="lemma">narrow_typing_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">solve_uniq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="narrow_subty"><span class="id" title="lemma">narrow_subty</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">G</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="definition">dom</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="StructuralProperties.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="StructuralProperties.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="StructuralProperties.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="StructuralProperties.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="StructuralProperties.html#U2"><span class="id" title="variable">U2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="StructuralProperties.html#narrow_subty_gen"><span class="id" title="lemma">narrow_subty_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">solve_uniq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="StructuralProperties.html#StructuralProperties"><span class="id" title="section">StructuralProperties</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">subenv_refl</span> <span class="id" title="var">subenv_push</span> <span class="id" title="var">subenv_last</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
