<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../index.html"> Home </a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Step</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="OperationProperties.html#"><span class="id" title="library">OperationProperties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="StructuralProperties.html#"><span class="id" title="library">StructuralProperties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Misc.html#"><span class="id" title="library">Misc</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">ListRelations</span>.<br/>

<br/>
<span class="id" title="var">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Stareat.html#"><span class="id" title="library">Stareat</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab19"></a><h1 class="section">Definitions Related to Step Subtyping</h1>


<div class="paragraph"> </div>

    Step subtyping was originally developed in Nieto17 and it is the first
 formalization of algorithmic subtyping of D<sub>&lt;:</sub>.
  
<div class="paragraph"> </div>

<a name="lab20"></a><h2 class="section">Definition of <span class="inlinecode"><span class="id" title="var">Exposure</span></span></h2>

</div>
<div class="code">
<span class="id" title="keyword">Reserved Notation</span> &quot;G ⊢ S ⇑ U" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90).<br/>
<span class="id" title="keyword">Inductive</span> <a name="exposure"><span class="id" title="inductive">exposure</span></a> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode"><span class="id" title="keyword">is</span></span> <span class="inlinecode"><span class="id" title="var">not</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">path</span></span> <br>
    <span class="inlinecode">―――――――――――――</span> Exp-Stop <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode"><span class="id" title="var">T</span></span> 
</div>
<div class="code">
| <a name="exp_stop"><span class="id" title="constructor">exp_stop</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">~</span><a class="idref" href="Misc.html#is_sel"><span class="id" title="definition">is_sel</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode">―――――――――</span> Exp-Top* <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode">⊤</span> 
</div>
<div class="code">
| <a name="exp_top"><span class="id" title="constructor">exp_top</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode">⊥</span> <br>
    <span class="inlinecode">―――――――――――――――――――――――――</span> Exp-Bot <br>
    <span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode">⊥</span> 
</div>
<div class="code">
| <a name="exp_bot"><span class="id" title="constructor">exp_bot</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode">{<span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U</span>}</span> <br>
    <span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode"><span class="id" title="var">U'</span></span> <br>
    <span class="inlinecode">――――――――――――――――――――――――――</span> Exp-Bnd <br>
    <span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode"><span class="id" title="var">U'</span></span> 
</div>
<div class="code">
| <a name="exp_bnd"><span class="id" title="constructor">exp_bnd</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">L</span> <span class="id" title="var">U</span> <span class="id" title="var">U'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U'"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U'"><span class="id" title="variable">U'</span></a><br/>
<span class="id" title="keyword">where</span> <a name="176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">&quot;</span></a>G ⊢ S ⇑ U" := (<a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>).<br/>
<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>.<br/>
<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="Step.html#revealing"><span class="id" title="inductive">revealing</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="prefix_wf_env"><span class="id" title="lemma">prefix_wf_env</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">prefix</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> @<span class="id" title="inductive">prefix</span>; <span class="id" title="var">routine</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">wf_env</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span> : <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<span class="id" title="var">_</span> <span class="id" title="notation">++</span> <span class="id" title="var">_</span>) &vdash; <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">invert</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="RevealingSubsumesExposure"><span class="id" title="section">RevealingSubsumesExposure</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">prefix_nil</span> <span class="id" title="var">pf_refl</span> <span class="id" title="var">prefix_trans</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="revealing_gives_prefix"><span class="id" title="lemma">revealing_gives_prefix</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">G'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">prefix</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Stareat.html#revealing"><span class="id" title="inductive">revealing</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">prefix_deapp</span>, <span class="id" title="lemma">prefix_decons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Step.html#revealing"><span class="id" title="inductive">revealing</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="revealing_sel_weakening"><span class="id" title="lemma">revealing_sel_weakening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">D</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Stareat.html#revealing"><span class="id" title="inductive">revealing</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">routine</span>]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">reassoc</span> 4 <span class="id" title="keyword">with</span> 2 3. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">reassoc</span> 4 <span class="id" title="keyword">with</span> 2 3. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="revealing_sel_weakening_prefix"><span class="id" title="lemma">revealing_sel_weakening_prefix</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">D</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">prefix</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">prefix_to_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tidy_up</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#revealing_sel_weakening"><span class="id" title="lemma">revealing_sel_weakening</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="exposure_to_revealing_gen"><span class="id" title="lemma">exposure_to_revealing_gen</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">prefix</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">D</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">eroutine</span>]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">IHexposure</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">in_prefix_binds</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span> := <span class="id" title="var">G'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_destructions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">IHexposure1</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">in_prefix_binds</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span> := <span class="id" title="var">G'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_destructions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<span class="id" title="var">IHexposure2</span> <span class="id" title="var">H8</span> <span class="id" title="var">x0</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#revealing_gives_prefix"><span class="id" title="lemma">revealing_gives_prefix</span></a>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Stareat.html#revealing_preserves_wf"><span class="id" title="lemma">revealing_preserves_wf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_destructions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="exposure_to_revealing"><span class="id" title="lemma">exposure_to_revealing</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">D</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#exposure_to_revealing_gen"><span class="id" title="lemma">exposure_to_revealing_gen</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Step.html#RevealingSubsumesExposure"><span class="id" title="section">RevealingSubsumesExposure</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h2 class="section">Definition of <span class="inlinecode"><span class="id" title="var">Upcast</span></span></h2>


<div class="paragraph"> </div>

    This is the <span class="inlinecode"><span class="id" title="var">Exposure</span></span> version of <span class="inlinecode"><span class="id" title="var">Upcast</span></span>. Since <span class="inlinecode"><span class="id" title="var">Upcast</span></span> and <span class="inlinecode"><span class="id" title="var">Downcast</span></span> are induced
  directly from <span class="inlinecode"><span class="id" title="var">Exposure</span></span>/<span class="inlinecode"><span class="id" title="var">Revealing</span></span>, their names are directly inherited.
 
</div>
<div class="code">
<span class="id" title="keyword">Reserved Notation</span> &quot;G ⊢ S ↗! U" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90).<br/>
<span class="id" title="keyword">Inductive</span> <a name="upcast_e"><span class="id" title="inductive">upcast_e</span></a> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="VarDef.html#avar"><span class="id" title="inductive">avar</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
</div>

<div class="doc">
<span class="inlinecode">―――――――――――</span> Uc-Top* <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&nearrow;</span> <span class="inlinecode">⊤</span> 
</div>
<div class="code">
| <a name="uce_top"><span class="id" title="constructor">uce_top</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode">⊥</span> <br>
    <span class="inlinecode">―――――――――――――――――――――――――</span> Uc-Bot <br>
    <span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&nearrow;</span> <span class="inlinecode">⊥</span> 
</div>
<div class="code">
| <a name="uce_bot"><span class="id" title="constructor">uce_bot</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode">{<span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U</span>}</span> <br>
    <span class="inlinecode">―――――――――――――――――――――――――</span> Uc-Bnd <br>
    <span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&nearrow;</span> <span class="inlinecode"><span class="id" title="var">U</span></span> 
</div>
<div class="code">
| <a name="uce_bnd"><span class="id" title="constructor">uce_bnd</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">L</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a><br/>
<span class="id" title="keyword">where</span> <a name="313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&quot;</span></a>G ⊢ S ↗! U" := (<a class="idref" href="Step.html#upcast_e"><span class="id" title="inductive">upcast_e</span></a> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>).<br/>
<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="Step.html#upcast_e"><span class="id" title="inductive">upcast_e</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h2 class="section">Definition of <span class="inlinecode"><span class="id" title="var">Downcast</span></span></h2>

</div>
<div class="code">
<span class="id" title="keyword">Reserved Notation</span> &quot;G ⊢ S ↘! U" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90).<br/>
<span class="id" title="keyword">Inductive</span> <a name="downcast_e"><span class="id" title="inductive">downcast_e</span></a> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="VarDef.html#avar"><span class="id" title="inductive">avar</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
</div>

<div class="doc">
<span class="inlinecode">―――――――――――</span> Dc-Bot* <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&searrow;</span> <span class="inlinecode">⊥</span> 
</div>
<div class="code">
| <a name="dce_bot"><span class="id" title="constructor">dce_bot</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⇑</span> <span class="inlinecode">⊥</span> <br>
    <span class="inlinecode">―――――――――――――――――――――――――</span> Dc-Top <br>
    <span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&searrow;</span> <span class="inlinecode">⊤</span> 
</div>
<div class="code">
| <a name="dce_top"><span class="id" title="constructor">dce_top</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⤊</span> <span class="inlinecode">{<span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U</span>}</span> <br>
    <span class="inlinecode">―――――――――――――――――――――――――</span> Dc-Bnd <br>
    <span class="inlinecode"><span class="id" title="var">G1</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">G2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&searrow;</span> <span class="inlinecode"><span class="id" title="var">L</span></span> 
</div>
<div class="code">
| <a name="dce_bnd"><span class="id" title="constructor">dce_bnd</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">L</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">)</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a><br/>
<span class="id" title="keyword">where</span> <a name="69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&quot;</span></a>G ⊢ S ↘! U" := (<a class="idref" href="Step.html#downcast_e"><span class="id" title="inductive">downcast_e</span></a> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>).<br/>
<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="Step.html#downcast_e"><span class="id" title="inductive">downcast_e</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab23"></a><h2 class="section">Definition of Step Subtyping</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;[ L ] G ⊢s S &lt;⦂ U" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>
<span class="id" title="keyword">Inductive</span> <a name="stp_subty"><span class="id" title="inductive">stp_subty</span></a> : <span class="id" title="abbreviation">vars</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
</div>

<div class="doc">
<span class="inlinecode">―――――――――――</span> S-Top <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode">⊤</span> 
</div>
<div class="code">
| <a name="ss_top"><span class="id" title="constructor">ss_top</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode">―――――――――――</span> S-Top <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode">⊥</span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> 
</div>
<div class="code">
| <a name="ss_bot"><span class="id" title="constructor">ss_bot</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode">―――――――――――――――</span> S-VRefl <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> 
</div>
<div class="code">
| <a name="ss_sel_refl"><span class="id" title="constructor">ss_sel_refl</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&nearrow;</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <br>
    <span class="inlinecode">―――――――――――――</span> S-Sel2 <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span> 
</div>
<div class="code">
| <a name="ss_sel_left"><span class="id" title="constructor">ss_sel_left</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> <span class="inlinecode">&searrow;</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <br>
    <span class="inlinecode">―――――――――――――</span> S-Sel1 <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">x.A</span></span> 
</div>
<div class="code">
| <a name="ss_sel_right"><span class="id" title="constructor">ss_sel_right</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">S2</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S1</span></span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">U1</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U2</span></span> <br>
    <span class="inlinecode">―――――――――――――――――――――――――――――――――――――</span> S-Bnd <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode">{<span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">S1</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U1</span>}</span> <span class="inlinecode">&lt;:</span> <span class="inlinecode">{<span class="id" title="var">A</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">S2</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U2</span>}</span> 
</div>
<div class="code">
| <a name="ss_bnd"><span class="id" title="constructor">ss_bnd</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">S1</span> <span class="id" title="var">U1</span> <span class="id" title="var">S2</span> <span class="id" title="var">U2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">U1</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U2</span></span> <br>
    <span class="inlinecode">―――――――――――――――――――――――――――――</span> S-All <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢<span class="id" title="var">s</span></span> <span class="inlinecode">∀(<span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">S</span>)<span class="id" title="var">U1</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode">∀(<span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">S</span>)<span class="id" title="var">U2</span></span> 
</div>
<div class="code">
| <a name="ss_all"><span class="id" title="constructor">ss_all</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a>  <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="abbreviation">singleton</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">union</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <span class="id" title="abbreviation">open</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a><br/>
<span class="id" title="keyword">where</span> <a name="d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">&quot;</span></a>[ L ] G ⊢s S &lt;⦂ U" := (<a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ope_list_fv_env_subset"><span class="id" title="lemma">ope_list_fv_env_subset</span></a> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">G1</span> <span class="id" title="var">G2</span> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> @<span class="id" title="inductive">ope_list</span>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">destruct_conjs</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">fsetdec</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exposure_strengthening"><span class="id" title="lemma">exposure_strengthening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">dep</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">gen</span> <span class="id" title="var">G2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exp_bot"><span class="id" title="constructor">exp_bot</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">progressive_inversions</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHlist</span> <span class="id" title="var">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">G2</span>; <span class="id" title="var">progressive_inversions</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Definitions.html#fv_union"><span class="id" title="lemma">fv_union</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="var">gen</span> <span class="id" title="var">G2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#exp_bnd"><span class="id" title="constructor">exp_bnd</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">progressive_inversions</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHlist</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">G2</span>; <span class="id" title="var">progressive_inversions</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Definitions.html#fv_union"><span class="id" title="lemma">fv_union</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHexposure1</span> <span class="id" title="var">H6</span> <span class="id" title="var">H5</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHexposure1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_conj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHexposure1</span>. <span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHexposure2</span> <span class="id" title="var">H6</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exposure_preserves_lc"><span class="id" title="lemma">exposure_preserves_lc</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHexposure1</span> <span class="id" title="var">H7</span> <span class="id" title="var">H8</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">routine</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="upcast_e_preserves_wf"><span class="id" title="lemma">upcast_e_preserves_wf</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destr</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#upcast_e"><span class="id" title="inductive">upcast_e</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="upcast_e_preserves_lc"><span class="id" title="lemma">upcast_e_preserves_lc</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destr</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#upcast_e"><span class="id" title="inductive">upcast_e</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_preserves_lc"><span class="id" title="lemma">exposure_preserves_lc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">routine</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="downcast_e_preserves_wf"><span class="id" title="lemma">downcast_e_preserves_wf</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destr</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#downcast_e"><span class="id" title="inductive">downcast_e</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="downcast_e_preserves_lc"><span class="id" title="lemma">downcast_e_preserves_lc</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destr</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#downcast_e"><span class="id" title="inductive">downcast_e</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_preserves_lc"><span class="id" title="lemma">exposure_preserves_lc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">routine</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="BisubtyStronger"><span class="id" title="section">BisubtyStronger</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Step.html#upcast"><span class="id" title="inductive">upcast</span></a> <a class="idref" href="Step.html#downcast"><span class="id" title="inductive">downcast</span></a> <a class="idref" href="Step.html#stareat"><span class="id" title="inductive">stareat</span></a> <a class="idref" href="Step.html#ope_list"><span class="id" title="inductive">ope_list</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">exposure_to_revealing</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="upcast_e_to_upcast"><span class="id" title="lemma">upcast_e_to_upcast</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">G'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">↗</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_to_revealing"><span class="id" title="lemma">exposure_to_revealing</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Stareat.html#uc_bot"><span class="id" title="constructor">uc_bot</span></a>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_to_revealing"><span class="id" title="lemma">exposure_to_revealing</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Stareat.html#uc_bnd"><span class="id" title="constructor">uc_bnd</span></a>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="downcast_e_to_downcast"><span class="id" title="lemma">downcast_e_to_downcast</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">G'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">↘</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_to_revealing"><span class="id" title="lemma">exposure_to_revealing</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Stareat.html#dc_top"><span class="id" title="constructor">dc_top</span></a>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_to_revealing"><span class="id" title="lemma">exposure_to_revealing</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Stareat.html#dc_bnd"><span class="id" title="constructor">dc_bnd</span></a>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">ope_list_to_nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Extern</span> 1 (<span class="id" title="var">_</span> <span class="id" title="notation">&subseteq;</span> <span class="id" title="var">_</span>) =&gt; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_env_by</span> <span class="id" title="var">x</span> <span class="id" title="var">G</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> "H" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">x</span> <span class="id" title="notation">`</span><span class="id" title="notation">in</span><span class="id" title="notation">`</span> <span class="id" title="definition">dom</span> <span class="id" title="var">G</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">in_to_binds</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">destruct_conjs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H'</span> : <span class="id" title="definition">binds</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">G</span> &vdash; <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>; <span class="id" title="var">destruct_conjs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">G</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="revealing_strengthening"><span class="id" title="lemma">revealing_strengthening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">D</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">D'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span> <span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Stareat.html#revealing"><span class="id" title="inductive">revealing</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">destruct_env_by</span> <span class="id" title="var">x</span> <span class="id" title="var">G'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_witness_uniq</span> <span class="id" title="var">H</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHrevealing</span> <span class="id" title="var">H6</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="constructor">nil</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">destruct_env_by</span> <span class="id" title="var">x</span> <span class="id" title="var">G'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_witness_uniq</span> <span class="id" title="var">H</span> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>. <span class="id" title="var">wf_env</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHrevealing1</span> <span class="id" title="var">H5</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stareat.html#revealing_preserves_wf"><span class="id" title="lemma">revealing_preserves_wf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3_</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stareat.html#revealing_preserves_wf"><span class="id" title="lemma">revealing_preserves_wf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHrevealing2</span> <span class="id" title="var">x0</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="upcast_strengthening"><span class="id" title="lemma">upcast_strengthening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">D</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">↗</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">D'</span><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">↗</span></a> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span> <span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="constructor">nil</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_env_by</span> <span class="id" title="var">x</span> <span class="id" title="var">G'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_witness_uniq</span> <span class="id" title="var">H0</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#revealing_strengthening"><span class="id" title="lemma">revealing_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span> := <span class="id" title="var">H6</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">destruct_env_by</span> <span class="id" title="var">x</span> <span class="id" title="var">G'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_witness_uniq</span> <span class="id" title="var">H0</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#revealing_strengthening"><span class="id" title="lemma">revealing_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span> := <span class="id" title="var">H6</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="downcast_strengthening"><span class="id" title="lemma">downcast_strengthening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">D</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">↘</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">D'</span><span class="id" title="notation">,</span> <span class="id" title="notation">(</span><a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">↘</span></a> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span> <span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="constructor">nil</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_env_by</span> <span class="id" title="var">x</span> <span class="id" title="var">G'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_witness_uniq</span> <span class="id" title="var">H0</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#revealing_strengthening"><span class="id" title="lemma">revealing_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span> := <span class="id" title="var">H6</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">destruct_env_by</span> <span class="id" title="var">x</span> <span class="id" title="var">G'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_witness_uniq</span> <span class="id" title="var">H0</span> <span class="id" title="var">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>. <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#revealing_strengthening"><span class="id" title="lemma">revealing_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span> := <span class="id" title="var">H6</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">ope_list_trans</span> <span class="id" title="var">ope_list_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Extern</span> 2 (<span class="id" title="method">lc_at</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) =&gt; <span class="id" title="var">progressive_inversions</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Extern</span> 2 (<a class="idref" href="Definitions.html#lc_typ_at"><span class="id" title="inductive">lc_typ_at</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) =&gt; <span class="id" title="var">progressive_inversions</span>; <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="stareat_strengthening"><span class="id" title="lemma">stareat_strengthening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">D</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span> <span class="id" title="var">D'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">ope_list</span> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="Step.html#D'"><span class="id" title="variable">D'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Stareat.html#stareat"><span class="id" title="inductive">stareat</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#upcast_strengthening"><span class="id" title="lemma">upcast_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span> := <span class="id" title="var">G'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Stareat.html#sa_sel_left"><span class="id" title="constructor">sa_sel_left</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Stareat.html#upcast_preserves_wf"><span class="id" title="lemma">upcast_preserves_wf</span></a> <span class="id" title="var">H12</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_dom</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Stareat.html#upcast_preserves_wf"><span class="id" title="lemma">upcast_preserves_wf</span></a> <span class="id" title="var">H11</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">fsetdec</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstareat</span>; <span class="id" title="tactic">trivial</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#downcast_strengthening"><span class="id" title="lemma">downcast_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span> := <span class="id" title="var">D'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Stareat.html#sa_sel_right"><span class="id" title="constructor">sa_sel_right</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Stareat.html#downcast_preserves_wf"><span class="id" title="lemma">downcast_preserves_wf</span></a> <span class="id" title="var">H12</span> <span class="id" title="var">H8</span> <span class="id" title="var">H9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_dom</span> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Stareat.html#downcast_preserves_wf"><span class="id" title="lemma">downcast_preserves_wf</span></a> <span class="id" title="var">H11</span> <span class="id" title="var">H7</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">fsetdec</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstareat</span>; <span class="id" title="tactic">trivial</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_dom</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_dom</span> <span class="id" title="var">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#ope_list_fv_env_subset"><span class="id" title="lemma">ope_list_fv_env_subset</span></a> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#ope_list_fv_env_subset"><span class="id" title="lemma">ope_list_fv_env_subset</span></a> <span class="id" title="var">H5</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stareat.html#sa_all"><span class="id" title="constructor">sa_all</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstareat1</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstareat2</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &vdash; <span class="id" title="inductive">ope_list</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &vdash; <a class="idref" href="Definitions.html#lc_typ_at"><span class="id" title="inductive">lc_typ_at</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OperationProperties.html#open_lc_typ"><span class="id" title="lemma">open_lc_typ</span></a>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &vdash; <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">fsetdec</span> | <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">fsetdec</span> | <span class="id" title="tactic">auto</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="OperationProperties.html#fv_open_typ"><span class="id" title="lemma">fv_open_typ</span></a> <span class="id" title="var">U1</span> <span class="id" title="var">x</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [ <span class="id" title="var">eassumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="OperationProperties.html#fv_open_typ"><span class="id" title="lemma">fv_open_typ</span></a> <span class="id" title="var">U2</span> <span class="id" title="var">x</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [ <span class="id" title="var">eassumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">prefix_nil</span> <span class="id" title="var">prefix_trans</span> <span class="id" title="var">prefix_app</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Step.html#prefix"><span class="id" title="inductive">prefix</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="upcast_gives_prefix"><span class="id" title="lemma">upcast_gives_prefix</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">D</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">↗</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#7b71624121e314f8b2a2036cac7ddc43"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">prefix</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#revealing_gives_prefix"><span class="id" title="lemma">revealing_gives_prefix</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="downcast_gives_prefix"><span class="id" title="lemma">downcast_gives_prefix</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">D</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">↘</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Stareat.html#4eb8d046fac5aa0c81d67357caa0de56"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">prefix</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#revealing_gives_prefix"><span class="id" title="lemma">revealing_gives_prefix</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="stp_subty_to_stareat"><span class="id" title="lemma">stp_subty_to_stareat</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Stareat.html#52cbacb23e7f8e08de5e9120147763af"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#upcast_e_to_upcast"><span class="id" title="lemma">upcast_e_to_upcast</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Stareat.html#upcast_preserves_wf"><span class="id" title="lemma">upcast_preserves_wf</span></a> <span class="id" title="var">H6</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">fsetdec</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#upcast_gives_prefix"><span class="id" title="lemma">upcast_gives_prefix</span></a> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">prefix_is_ope_list</span> <span class="id" title="var">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_dom</span> <span class="id" title="var">H12</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHstp_subty</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">fsetdec</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#stareat_strengthening"><span class="id" title="lemma">stareat_strengthening</span></a>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#downcast_e_to_downcast"><span class="id" title="lemma">downcast_e_to_downcast</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Stareat.html#downcast_preserves_wf"><span class="id" title="lemma">downcast_preserves_wf</span></a> <span class="id" title="var">H6</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">fsetdec</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#downcast_gives_prefix"><span class="id" title="lemma">downcast_gives_prefix</span></a> <span class="id" title="var">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">prefix_is_ope_list</span> <span class="id" title="var">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">ope_list_dom</span> <span class="id" title="var">H12</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHstp_subty</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">fsetdec</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">trivial</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#stareat_strengthening"><span class="id" title="lemma">stareat_strengthening</span></a>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Stareat.html#sa_all"><span class="id" title="constructor">sa_all</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Stareat.html#stareat_refl"><span class="id" title="definition">stareat_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">invert</span> <span class="id" title="var">H2</span>; <span class="id" title="var">invert</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstp_subty</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &vdash; <span class="id" title="inductive">ope_list</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &vdash; <a class="idref" href="Definitions.html#lc_typ_at"><span class="id" title="inductive">lc_typ_at</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="OperationProperties.html#open_lc_typ"><span class="id" title="lemma">open_lc_typ</span></a>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &vdash; <a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">fsetdec</span> | <span class="id" title="tactic">auto</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="OperationProperties.html#fv_open_typ"><span class="id" title="lemma">fv_open_typ</span></a> <span class="id" title="var">U1</span> <span class="id" title="var">x</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [ <span class="id" title="var">eassumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="OperationProperties.html#fv_open_typ"><span class="id" title="lemma">fv_open_typ</span></a> <span class="id" title="var">U2</span> <span class="id" title="var">x</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [ <span class="id" title="var">eassumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Step.html#BisubtyStronger"><span class="id" title="section">BisubtyStronger</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="exposure_weakening"><span class="id" title="lemma">exposure_weakening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">reassoc</span> 4 <span class="id" title="keyword">with</span> 2; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="revealing_to_exposure"><span class="id" title="lemma">revealing_to_exposure</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">G'</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">⤊</span></a> <a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <a class="idref" href="Stareat.html#b0d77d0c4b311788e7a08e48389035c0"><span class="id" title="notation">&vdash;</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Stareat.html#revealing"><span class="id" title="inductive">revealing</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#revealing_gives_prefix"><span class="id" title="lemma">revealing_gives_prefix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3_0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">prefix_to_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3_0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#revealing_gives_prefix"><span class="id" title="lemma">revealing_gives_prefix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">prefix_to_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tidy_up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_weakening"><span class="id" title="lemma">exposure_weakening</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab24"></a><h2 class="section">An Alternative Definition of <span class="inlinecode"><span class="id" title="var">Exposure</span></span></h2>


<div class="paragraph"> </div>

    In this definition of <span class="inlinecode"><span class="id" title="var">Exposure</span></span>, contexts are not truncated in the premises. It
 turns out that two definitions are equivalent. This definition is a convenient setup 
 to show the completeness theorem w.r.t. Kernel D<sub>&lt;:</sub>.
 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="EquivalentRepr"><span class="id" title="section">EquivalentRepr</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="exposure'"><span class="id" title="inductive">exposure'</span></a> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="ex_stop"><span class="id" title="constructor">ex_stop</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">~</span><a class="idref" href="Misc.html#is_sel"><span class="id" title="definition">is_sel</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;| <a name="ex_top"><span class="id" title="constructor">ex_top</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a><br/>
&nbsp;&nbsp;| <a name="ex_bot"><span class="id" title="constructor">ex_bot</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>)) <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a><br/>
&nbsp;&nbsp;| <a name="ex_bnd"><span class="id" title="constructor">ex_bnd</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span> <span class="id" title="var">L</span> <span class="id" title="var">U</span> <span class="id" title="var">U'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">binds</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Step.html#U'"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>)) <a class="idref" href="Step.html#U'"><span class="id" title="variable">U'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="exposure'_weakening"><span class="id" title="lemma">exposure'_weakening</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> (<a class="idref" href="Step.html#G'"><span class="id" title="variable">G'</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">binds_weaken</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="exposure'_weakening_gen"><span class="id" title="lemma">exposure'_weakening_gen</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dep</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">exposure_weakening</span> <span class="id" title="var">exposure'_weakening</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exposure_to_exposure'"><span class="id" title="lemma">exposure_to_exposure'</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#ex_bot"><span class="id" title="constructor">ex_bot</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">reassoc</span> 3 <span class="id" title="keyword">with</span> 2. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#ex_bnd"><span class="id" title="constructor">ex_bnd</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">reassoc</span> 3 <span class="id" title="keyword">with</span> 2; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exposure'_to_exposure"><span class="id" title="lemma">exposure'_to_exposure</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">tidy_up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#exp_bot"><span class="id" title="constructor">exp_bot</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHexposure'</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_strengthening"><span class="id" title="lemma">exposure_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G2</span> := <span class="id" title="var">H</span> <span class="id" title="notation">++</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">app_assoc</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wf_env</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_app</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">tidy_up</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHexposure'1</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHexposure'2</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cons_app_one</span>, &lt;- <span class="id" title="lemma">app_assoc</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHexposure'1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_strengthening"><span class="id" title="lemma">exposure_strengthening</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHexposure'1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#exp_bnd"><span class="id" title="constructor">exp_bnd</span></a>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_strengthening"><span class="id" title="lemma">exposure_strengthening</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G2</span> := <span class="id" title="var">H</span> <span class="id" title="notation">++</span> <span class="id" title="var">x</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">app_assoc</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHexposure'1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">wf_env</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exposure'_equiv_exposure"><span class="id" title="lemma">exposure'_equiv_exposure</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">&lt;-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#exposure'"><span class="id" title="inductive">exposure'</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Step.html#exposure'_to_exposure"><span class="id" title="lemma">exposure'_to_exposure</span></a>, <a class="idref" href="Step.html#exposure_to_exposure'"><span class="id" title="lemma">exposure_to_exposure'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Step.html#EquivalentRepr"><span class="id" title="section">EquivalentRepr</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab25"></a><h2 class="section">A Formalization of Termination of Step Subtyping</h2>


<div class="paragraph"> </div>

    One can see from the setup here to understand why it is necessary to ease the
 proof of termination. The complexity can quickly become unmanageable if the setup is
 not fundamentally simplified. 

<div class="paragraph"> </div>

 There are two technical details worth mentioning:
<ul class="doclist">
<li> The measure is in fact <i>partial</i>. That means the measure in fact cannot be directly
   implemented in type theory. The treatment here is set "impossible" cases to be 0,
   and use logical predicate to avoid those cases. However, this induces way more
   technical setup.

</li>
<li> Since variables are represented by local nameless representation with cofinite
   quantification, the measure needs to carry two contexts, the one with names and one
   for de Bruijn indices. Thus, lemmas are required to connect both contexts.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="MeasuresAndFacts"><span class="id" title="section">MeasuresAndFacts</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a name="denv"><span class="id" title="abbreviation">denv</span></a> := (<span class="id" title="inductive">list</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="denv_fv"><span class="id" title="definition">denv_fv</span></a> (<span class="id" title="var">D</span> : <a class="idref" href="Step.html#denv"><span class="id" title="abbreviation">denv</span></a>) : <span class="id" title="abbreviation">atoms</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">fold_right</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">T</span> <span class="id" title="var">fvs</span> =&gt; <a class="idref" href="Step.html#fvs"><span class="id" title="variable">fvs</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="notation">{}</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Step.html#denv_fv"><span class="id" title="definition">denv_fv</span></a> <span class="id" title="var">D</span>/.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="FvDenv"><span class="id" title="instance">FvDenv</span></a> : <span class="id" title="class">HasFv</span> <a class="idref" href="Step.html#denv"><span class="id" title="abbreviation">denv</span></a> := { <span class="id" title="method">fv</span> := <a class="idref" href="Step.html#denv_fv"><span class="id" title="definition">denv_fv</span></a> }.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="denv_measure"><span class="id" title="definition">denv_measure</span></a> (<span class="id" title="var">D</span> : <a class="idref" href="Step.html#denv"><span class="id" title="abbreviation">denv</span></a>) : <span class="id" title="inductive">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#total"><span class="id" title="definition">total</span></a> <span class="id" title="notation">$</span> <span class="id" title="definition">List.map</span> <a class="idref" href="Misc.html#typ_struct_measure"><span class="id" title="definition">typ_struct_measure</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Step.html#denv_measure"><span class="id" title="definition">denv_measure</span></a> <span class="id" title="var">D</span>/.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="wf_measure"><span class="id" title="definition">wf_measure</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">T</span> : <span class="id" title="inductive">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#env_measure"><span class="id" title="definition">env_measure</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Step.html#denv_measure"><span class="id" title="definition">denv_measure</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Misc.html#typ_struct_measure"><span class="id" title="definition">typ_struct_measure</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Step.html#wf_measure"><span class="id" title="definition">wf_measure</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">T</span>/.<br/>

<br/>
</div>

<div class="doc">
The measure is computed from a regular context AND a de Bruijn context, represented by <span class="inlinecode"><span class="id" title="var">D</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> (<span class="id" title="var">G</span> : <a class="idref" href="Definitions.html#env"><span class="id" title="abbreviation">env</span></a>) (<span class="id" title="var">D</span> : <a class="idref" href="Step.html#denv"><span class="id" title="abbreviation">denv</span></a>) (<span class="id" title="var">T</span> : <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a>) : <span class="id" title="inductive">nat</span> <span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> (<a class="idref" href="Step.html#wf_measure"><span class="id" title="definition">wf_measure</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">T</span>) <span class="id" title="definition">lt</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a> := 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Definitions.html#typ_bot"><span class="id" title="constructor">typ_bot</span></a> := 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="constructor">nil</span> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">(</span></a><a class="idref" href="VarDef.html#avar_b"><span class="id" title="constructor">avar_b</span></a> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">)</span></a>) := 0;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Step.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">::</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">(</span></a><a class="idref" href="VarDef.html#avar_b"><span class="id" title="constructor">avar_b</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">0)</span></a>) := 1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">T'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Step.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">::</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>) (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">(</span></a><a class="idref" href="VarDef.html#avar_b"><span class="id" title="constructor">avar_b</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">(</span></a><span class="id" title="constructor">S</span> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">))</span></a>) := <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_b"><span class="id" title="constructor">avar_b</span></a> <span class="id" title="var">n</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="constructor">nil</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">(</span></a><a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">)</span></a>) := 0;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> (<span class="id" title="notation">(</span><a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="Step.html#T'"><span class="id" title="variable">T'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">::</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">(</span></a><a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">x</span> <span class="id" title="notation">==</span> <span class="id" title="var">y</span> =&gt; {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="abbreviation">in_left</span> =&gt; 1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="constructor">nil</span> <span class="id" title="var">T'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="abbreviation">in_right</span> =&gt; <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 <span class="id" title="notation">+</span> <span class="id" title="definition">Nat.max</span> (<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">T</span>) (<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">U</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> (<span class="id" title="var">T</span> <span class="id" title="notation">::</span> <span class="id" title="var">D</span>) <span class="id" title="var">U</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">measures</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">measures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#typ_struct_measure_ge_1"><span class="id" title="lemma">typ_struct_measure_ge_1</span></a> <span class="id" title="var">T'</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#typ_struct_measure_ge_1"><span class="id" title="lemma">typ_struct_measure_ge_1</span></a> <span class="id" title="var">T'</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">measures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#typ_struct_measure_ge_1"><span class="id" title="lemma">typ_struct_measure_ge_1</span></a> <span class="id" title="var">T'</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">measures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#typ_struct_measure_ge_1"><span class="id" title="lemma">typ_struct_measure_ge_1</span></a> <span class="id" title="var">T'</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="wf_search"><span class="id" title="definition">wf_search</span></a> <span class="id" title="var">G</span> <span class="id" title="var">T</span> : <span class="id" title="inductive">nat</span> := <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="constructor">nil</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">mass_discharge</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">fsetdec</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> <span class="id" title="var">G</span> (<span class="id" title="var">D</span> : <a class="idref" href="Step.html#denv"><span class="id" title="abbreviation">denv</span></a>) <span class="id" title="var">v</span> : <span class="id" title="inductive">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">nil</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">cons</span> <span class="id" title="notation">(</span><span class="id" title="var">v'</span><span class="id" title="notation">,</span> <span class="id" title="var">T'</span><span class="id" title="notation">)</span> <span class="id" title="var">G'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">v'</span> <span class="id" title="notation">==</span> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> 1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G'</span> <span class="id" title="constructor">nil</span> <span class="id" title="var">T'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="Step.html#wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> <span class="id" title="var">G'</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="fv_search_equiv"><span class="id" title="lemma">fv_search_equiv</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <span class="id" title="notation">$</span> <a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">v</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_inversions</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="fv_ignores_D"><span class="id" title="lemma">fv_ignores_D</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="constructor">nil</span> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">G</span>; <span class="id" title="var">routine</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="wf_search_bv"><span class="id" title="definition">wf_search_bv</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">n</span> : <span class="id" title="inductive">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">nil</span> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">cons</span> <span class="id" title="var">T'</span> <span class="id" title="var">D'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">O</span> =&gt; 1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="var">D'</span> <span class="id" title="var">T'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">S</span> <span class="id" title="var">n'</span> =&gt; <a class="idref" href="Step.html#wf_search_bv"><span class="id" title="definition">wf_search_bv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="var">D'</span> <span class="id" title="var">n'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="bv_search_equiv"><span class="id" title="lemma">bv_search_equiv</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_bv"><span class="id" title="definition">wf_search_bv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <span class="id" title="notation">$</span> <a class="idref" href="VarDef.html#avar_b"><span class="id" title="constructor">avar_b</span></a> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <span class="id" title="notation">$</span> <a class="idref" href="VarDef.html#avar_b"><span class="id" title="constructor">avar_b</span></a> <span class="id" title="var">n</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_inversions</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="bv_search_idx"><span class="id" title="lemma">bv_search_idx</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">D1</span> <span class="id" title="var">D2</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_bv"><span class="id" title="definition">wf_search_bv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Step.html#D1"><span class="id" title="variable">D1</span></a> <span class="id" title="notation">++</span> <span class="id" title="notation">[</span><a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">]</span> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#D2"><span class="id" title="variable">D2</span></a>) (<span class="id" title="definition">length</span> <a class="idref" href="Step.html#D1"><span class="id" title="variable">D1</span></a>) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D2"><span class="id" title="variable">D2</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">D1</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHD1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHD1</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="wf_search_avar"><span class="id" title="definition">wf_search_avar</span></a> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">v</span> : <span class="id" title="inductive">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VarDef.html#avar_b"><span class="id" title="constructor">avar_b</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="Step.html#wf_search_bv"><span class="id" title="definition">wf_search_bv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">v</span> =&gt; <a class="idref" href="Step.html#wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="avar_search_equiv"><span class="id" title="lemma">avar_search_equiv</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_avar"><span class="id" title="definition">wf_search_avar</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#bv_search_equiv"><span class="id" title="lemma">bv_search_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#fv_search_equiv"><span class="id" title="lemma">fv_search_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="wf_search_fv_weaken"><span class="id" title="lemma">wf_search_fv_weaken</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">D</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">in</span><span class="id" title="notation">`</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#wf_search_fv"><span class="id" title="definition">wf_search_fv</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">G1</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">destruct_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Misc.html#wf_var_in"><span class="id" title="lemma">wf_var_in</span></a>; <span class="id" title="var">mass_discharge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHG1</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="wf_weaken_measure"><span class="id" title="definition">wf_weaken_measure</span></a> (<span class="id" title="var">D</span> : <a class="idref" href="Step.html#denv"><span class="id" title="abbreviation">denv</span></a>) (<span class="id" title="var">T</span> : <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a>) : <span class="id" title="inductive">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#denv_measure"><span class="id" title="definition">denv_measure</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Misc.html#typ_struct_measure"><span class="id" title="definition">typ_struct_measure</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Step.html#wf_weaken_measure"><span class="id" title="definition">wf_weaken_measure</span></a> <span class="id" title="var">D</span> <span class="id" title="var">T</span>/.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Fixpoint</span> <a name="wf_search_weaken_gen"><span class="id" title="definition">wf_search_weaken_gen</span></a> <span class="id" title="var">D</span> <span class="id" title="var">T</span> {<span class="id" title="keyword">measure</span> (<a class="idref" href="Step.html#wf_weaken_measure"><span class="id" title="definition">wf_weaken_measure</span></a> <span class="id" title="var">D</span> <span class="id" title="var">T</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <span class="id" title="var">T</span> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <span class="id" title="var">D</span> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="var">D</span> <span class="id" title="var">T</span> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <span class="id" title="var">D</span> <span class="id" title="var">T</span> := <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">T</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">D</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">wf_search_weaken_gen</span>; <span class="id" title="var">mass_discharge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#typ_struct_measure_ge_1"><span class="id" title="lemma">typ_struct_measure_ge_1</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">wf_search_weaken_gen</span>; <span class="id" title="var">mass_discharge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">`</span><span class="id" title="notation">in</span><span class="id" title="notation">`</span> <span class="id" title="definition">dom</span> <span class="id" title="var">G2</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#wf_search_fv_weaken"><span class="id" title="lemma">wf_search_fv_weaken</span></a> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">D</span> <span class="id" title="var">H</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#fv_search_equiv"><span class="id" title="lemma">fv_search_equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">erewrite</span> <span class="id" title="var">wf_search_weaken_gen</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">erewrite</span> <span class="id" title="var">wf_search_weaken_gen</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">wf_search_weaken_gen</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">G2</span> := <span class="id" title="var">G2</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="wf_search_weaken"><span class="id" title="lemma">wf_search_weaken</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#wf_search_weaken_gen"><span class="id" title="definition">wf_search_weaken_gen</span></a>; <span class="id" title="var">mass_discharge</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="wf_lookup_lt"><span class="id" title="lemma">wf_lookup_lt</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&lt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> (<a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a>) (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <span class="id" title="notation">$</span> <a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#wf_search_weaken"><span class="id" title="lemma">wf_search_weaken</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">x</span> <span class="id" title="notation">==</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="incr_lc"><span class="id" title="inductive">incr_lc</span></a> : <span class="id" title="inductive">list</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="lc_nil"><span class="id" title="constructor">lc_nil</span></a> : <a class="idref" href="Step.html#incr_lc"><span class="id" title="inductive">incr_lc</span></a> <span class="id" title="constructor">nil</span><br/>
&nbsp;&nbsp;| <a name="lc_cons"><span class="id" title="constructor">lc_cons</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">T</span> <span class="id" title="var">D</span>, <span class="id" title="method">lc_at</span> (<span class="id" title="definition">length</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>) <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Step.html#incr_lc"><span class="id" title="inductive">incr_lc</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">-&gt;</span> <a class="idref" href="Step.html#incr_lc"><span class="id" title="inductive">incr_lc</span></a> (<a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">::</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Step.html#incr_lc"><span class="id" title="inductive">incr_lc</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="open_rec_D"><span class="id" title="definition">open_rec_D</span></a> <span class="id" title="var">v</span> (<span class="id" title="var">D</span> : <a class="idref" href="Step.html#denv"><span class="id" title="abbreviation">denv</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">nil</span> =&gt; <span class="id" title="constructor">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="constructor">cons</span> <span class="id" title="var">T</span> <span class="id" title="var">D'</span> =&gt; <span class="id" title="method">open_rec</span> (<span class="id" title="definition">length</span> <span class="id" title="var">D'</span>) <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="var">T</span> <span class="id" title="notation">::</span> <a class="idref" href="Step.html#open_rec_D"><span class="id" title="definition">open_rec_D</span></a> <a class="idref" href="Step.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="var">D'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="wf_search_impl_avar_f_eq"><span class="id" title="lemma">wf_search_impl_avar_f_eq</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">D</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> (<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#y"><span class="id" title="variable">y</span></a>)) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">==</span> <a class="idref" href="Step.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">in_left</span> =&gt; 1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="constructor">nil</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">in_right</span> =&gt; <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#y"><span class="id" title="variable">y</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">D</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>; <span class="id" title="var">destruct_eq</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This theorem connects the regular context with the de Bruijn context. It states
  that pushing a type into the de Bruijn context, is the same as pushing into the
  regular context, with the de Bruijn context and the type opened by that type.

<div class="paragraph"> </div>

  This theorem heavily relies on the well-formedness predicate, which is an indirect
  indicator of the measure function being partial.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Program Fixpoint</span> <a name="wf_open_shift_gen"><span class="id" title="definition">wf_open_shift_gen</span></a> <span class="id" title="var">D</span> <span class="id" title="var">U</span> {<span class="id" title="keyword">measure</span> (<a class="idref" href="Step.html#wf_weaken_measure"><span class="id" title="definition">wf_weaken_measure</span></a> <span class="id" title="var">D</span> <span class="id" title="var">U</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <span class="id" title="var">U</span> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <span class="id" title="var">D</span> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#incr_lc"><span class="id" title="inductive">incr_lc</span></a> (<span class="id" title="var">D</span> <span class="id" title="notation">++</span> <span class="id" title="notation">[</span><a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">]</span>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">length</span> <span class="id" title="var">D</span> <span class="id" title="notation">=</span> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="method">fv</span> <span class="id" title="var">D</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="method">fv</span> <span class="id" title="var">U</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">lc_at</span> (<span class="id" title="constructor">S</span> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a>) <span class="id" title="var">U</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<span class="id" title="var">D</span> <span class="id" title="notation">++</span> <span class="id" title="notation">[</span><a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">]</span>) <span class="id" title="var">U</span> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> (<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Step.html#open_rec_D"><span class="id" title="definition">open_rec_D</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">D</span>) (<span class="id" title="method">open_rec</span> <a class="idref" href="Step.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">U</span>) := <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">U</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">destruct_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#bv_search_equiv"><span class="id" title="lemma">bv_search_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#bv_search_idx"><span class="id" title="lemma">bv_search_idx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_impl_avar_f_eq"><span class="id" title="lemma">wf_search_impl_avar_f_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_eq</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">n</span> <span class="id" title="notation">&lt;</span> <span class="id" title="definition">length</span> <span class="id" title="var">D</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">D</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">app_length</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Nat.add_comm</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H10</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">erewrite</span> <span class="id" title="var">wf_open_shift_gen</span>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Misc.html#typ_struct_measure_ge_1"><span class="id" title="lemma">typ_struct_measure_ge_1</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">wf_open_shift_gen</span>; <span class="id" title="var">eroutine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_impl_avar_f_eq"><span class="id" title="lemma">wf_search_impl_avar_f_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">solve_notin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#fv_search_equiv"><span class="id" title="lemma">fv_search_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#fv_ignores_D"><span class="id" title="lemma">fv_ignores_D</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#fv_ignores_D"><span class="id" title="lemma">fv_ignores_D</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">D</span> := <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="var">U1</span> <span class="id" title="notation">::</span> <span class="id" title="var">D</span> <span class="id" title="notation">++</span> <span class="id" title="notation">[</span><span class="id" title="var">T</span><span class="id" title="notation">]</span>) <span class="id" title="keyword">with</span> (<span class="id" title="notation">(</span><span class="id" title="var">U1</span> <span class="id" title="notation">::</span> <span class="id" title="var">D</span><span class="id" title="notation">)</span> <span class="id" title="notation">++</span> <span class="id" title="notation">[</span><span class="id" title="var">T</span><span class="id" title="notation">]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">wf_open_shift_gen</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">eroutine</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">app_length</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">Nat.add_comm</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">try</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">wf_open_shift_gen</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">eroutine</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma effectively eliminates the need of the de Bruijn context. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="wf_open_shift"><span class="id" title="lemma">wf_open_shift</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">lc_at</span> 1 <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">[</span><a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">]</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> (<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) <span class="id" title="constructor">nil</span> (<span class="id" title="abbreviation">open</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Step.html#wf_open_shift_gen"><span class="id" title="definition">wf_open_shift_gen</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">D</span> := <span class="id" title="constructor">nil</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">progressive_destructions</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">mass_discharge</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Step.html#MeasuresAndFacts"><span class="id" title="section">MeasuresAndFacts</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <span class="id" title="var">G</span> <span class="id" title="var">T</span>/.<br/>

<br/>
</div>

<div class="doc">
<a name="lab26"></a><h2 class="section">Proofs of Step Subtyping Being Algorithmic</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> step subtyping is sound, and

</li>
<li> step subtyping terminates.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="Algorithmic"><span class="id" title="section">Algorithmic</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exposure_sound"><span class="id" title="lemma">exposure_sound</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_for_sure</span> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel2"><span class="id" title="constructor">st_sel2</span></a>. <span class="id" title="tactic">instantiate</span> (1 := <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="StructuralProperties.html#weaken_subty"><span class="id" title="definition">weaken_subty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_for_sure</span> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel2"><span class="id" title="constructor">st_sel2</span></a>. <span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">L</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="StructuralProperties.html#weaken_subty"><span class="id" title="definition">weaken_subty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="stp_subty_sound"><span class="id" title="lemma">stp_subty_sound</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#a9b8713d378e53561be788f0c59b91ee"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Step.html#exposure_sound"><span class="id" title="lemma">exposure_sound</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_sound"><span class="id" title="lemma">exposure_sound</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_for_sure</span> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_trans"><span class="id" title="constructor">st_trans</span></a>; [| <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstp_subty</span>]; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel2"><span class="id" title="constructor">st_sel2</span></a>. <span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">L0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="StructuralProperties.html#weaken_subty"><span class="id" title="definition">weaken_subty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_for_sure</span> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel1"><span class="id" title="constructor">st_sel1</span></a>. <span class="id" title="tactic">instantiate</span> (1 := <a class="idref" href="Definitions.html#typ_top"><span class="id" title="constructor">typ_top</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Step.html#exposure_sound"><span class="id" title="lemma">exposure_sound</span></a>, <a class="idref" href="StructuralProperties.html#weaken_subty"><span class="id" title="definition">weaken_subty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_sound"><span class="id" title="lemma">exposure_sound</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="lemma">binds_for_sure</span> <span class="id" title="var">G2</span> <span class="id" title="var">G1</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_trans"><span class="id" title="constructor">st_trans</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">IHstp_subty</span> |]; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_sel1"><span class="id" title="constructor">st_sel1</span></a>. <span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">U0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="StructuralProperties.html#weaken_subty"><span class="id" title="definition">weaken_subty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#st_all"><span class="id" title="constructor">st_all</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="method">fv</span> <span class="id" title="var">G</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cofinite</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="StructuralProperties.html#open_subst_subty"><span class="id" title="lemma">open_subst_subty</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <span class="id" title="var">x</span>); <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="lemma">notin_union_3</span>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHstp_subty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This is a predicate which asserts the termination of step subtyping. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="sst_top"><span class="id" title="constructor">sst_top</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>, <a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> (<a class="idref" href="Step.html#ss_top"><span class="id" title="constructor">ss_top</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;| <a name="sst_bot"><span class="id" title="constructor">sst_bot</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>, <a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> (<a class="idref" href="Step.html#ss_bot"><span class="id" title="constructor">ss_bot</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;| <a name="sst_sel_refl"><span class="id" title="constructor">sst_sel_refl</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span>, <a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> (<a class="idref" href="Step.html#ss_sel_refl"><span class="id" title="constructor">ss_sel_refl</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;| <a name="sst_sel_left"><span class="id" title="constructor">sst_sel_left</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Uc</span> : <a class="idref" href="Step.html#upcast_e"><span class="id" title="inductive">upcast_e</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Rec</span> : <a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">&lt;</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> (<a class="idref" href="Step.html#ss_sel_left"><span class="id" title="constructor">ss_sel_left</span></a> <a class="idref" href="Step.html#Uc"><span class="id" title="variable">Uc</span></a> <a class="idref" href="Step.html#Rec"><span class="id" title="variable">Rec</span></a>)<br/>
&nbsp;&nbsp;| <a name="sst_sel_right"><span class="id" title="constructor">sst_sel_right</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Dc</span> : <a class="idref" href="Step.html#downcast_e"><span class="id" title="inductive">downcast_e</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Rec</span> : <a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&lt;</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> (<a class="idref" href="Step.html#ss_sel_right"><span class="id" title="constructor">ss_sel_right</span></a> <a class="idref" href="Step.html#Dc"><span class="id" title="variable">Dc</span></a> <a class="idref" href="Step.html#Rec"><span class="id" title="variable">Rec</span></a>)<br/>
&nbsp;&nbsp;| <a name="sst_bnd"><span class="id" title="constructor">sst_bnd</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">S1</span> <span class="id" title="var">U1</span> <span class="id" title="var">S2</span> <span class="id" title="var">U2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Rec1</span> : <a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="Step.html#S1"><span class="id" title="variable">S1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Rec2</span> : <a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">&lt;</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a>) <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a> <span class="id" title="notation">&lt;</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a>) <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="Step.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> (<a class="idref" href="Step.html#ss_bnd"><span class="id" title="constructor">ss_bnd</span></a> <a class="idref" href="Step.html#Rec1"><span class="id" title="variable">Rec1</span></a> <a class="idref" href="Step.html#Rec2"><span class="id" title="variable">Rec2</span></a>)<br/>
&nbsp;&nbsp;| <a name="sst_all"><span class="id" title="constructor">sst_all</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U1</span> <span class="id" title="var">U2</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Rec</span> : <a class="idref" href="Step.html#stp_subty"><span class="id" title="inductive">stp_subty</span></a> (<span class="id" title="abbreviation">union</span> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> (<span class="id" title="abbreviation">union</span> (<span class="id" title="abbreviation">singleton</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) (<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>))) (<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) (<span class="id" title="abbreviation">open</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a>) (<span class="id" title="abbreviation">open</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Ni</span> : <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">`</span><span class="id" title="notation">notin</span><span class="id" title="notation">`</span> <span class="id" title="abbreviation">union</span> (<span class="id" title="method">fv</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) (<span class="id" title="abbreviation">union</span> (<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>) (<span class="id" title="abbreviation">union</span> (<span class="id" title="method">fv</span> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a>) (<span class="id" title="abbreviation">union</span> (<span class="id" title="method">fv</span> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a>) <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a>)))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> (<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) (<span class="id" title="abbreviation">open</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a>) <span class="id" title="notation">+</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> (<a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a>) (<span class="id" title="abbreviation">open</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a>) <span class="id" title="notation">&lt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a>) <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> (<a class="idref" href="Step.html#ss_all"><span class="id" title="constructor">ss_all</span></a> <a class="idref" href="Step.html#U1"><span class="id" title="variable">U1</span></a> <a class="idref" href="Step.html#U2"><span class="id" title="variable">U2</span></a> <a class="idref" href="Step.html#Ni"><span class="id" title="variable">Ni</span></a> <a class="idref" href="Step.html#Rec"><span class="id" title="variable">Rec</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="wf_search_wf_ge_1"><span class="id" title="lemma">wf_search_wf_ge_1</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">&gt;=</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">T</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">G</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">tidy_up</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">a</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">auto</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">empty_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_impl_avar_f_eq"><span class="id" title="lemma">wf_search_impl_avar_f_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Misc.html#wf_fv_is_dom"><span class="id" title="lemma">wf_fv_is_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">NotInTac</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="abbreviation">singleton</span> <span class="id" title="var">a</span> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <span class="id" title="var">G</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G1</span> <span class="id" title="var">G2</span> <span class="id" title="var">D</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">uniq</span> (<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> (<a class="idref" href="Step.html#G2"><span class="id" title="variable">G2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">~</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">++</span> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a>) <a class="idref" href="Step.html#D"><span class="id" title="variable">D</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> (<a class="idref" href="VarDef.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">=</span> 1 <span class="id" title="notation">+</span> <a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> <a class="idref" href="Step.html#G1"><span class="id" title="variable">G1</span></a> <span class="id" title="constructor">nil</span> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#fv_search_equiv"><span class="id" title="lemma">fv_search_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">G2</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">destruct_conjs</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">destruct_eq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">destruct_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">solve_uniq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHG2</span>; <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="exposure_measure_decrease"><span class="id" title="lemma">exposure_measure_decrease</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#176e1ebce6e52f68524dce5129ea8e2e"><span class="id" title="notation">⇑</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&gt;=</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#exposure"><span class="id" title="inductive">exposure</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#wf_search_wf_ge_1"><span class="id" title="lemma">wf_search_wf_ge_1</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">simp</span>  <span class="id" title="var">wf_search_impl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> <span class="id" title="var">IHexposure1</span> <span class="id" title="var">Hrec1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> (<a class="idref" href="Step.html#exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> <span class="id" title="var">H2_</span>) <span class="id" title="var">Wf</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> (<a class="idref" href="Step.html#exposure_preserves_lc"><span class="id" title="lemma">exposure_preserves_lc</span></a> <span class="id" title="var">H2_</span>) <span class="id" title="var">Lc</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_inversions</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> <span class="id" title="var">IHexposure2</span> <span class="id" title="var">Hrec2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrec1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> (<a class="idref" href="Step.html#exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> <span class="id" title="var">H2_0</span>) <span class="id" title="var">Wf'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> ?<span class="id" title="var">G</span> <span class="id" title="constructor">nil</span> ?<span class="id" title="var">T</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <span class="id" title="var">G</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#wf_search_weaken"><span class="id" title="lemma">wf_search_weaken</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#wf_search_weaken"><span class="id" title="lemma">wf_search_weaken</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="upcast_e_measure_decrease"><span class="id" title="lemma">upcast_e_measure_decrease</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#313345a775c0b6b7b7c4d54f5253e148"><span class="id" title="notation">&nearrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="notation">&gt;</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#upcast_e"><span class="id" title="inductive">upcast_e</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">`</span><span class="id" title="notation">in</span><span class="id" title="notation">`</span> <span class="id" title="definition">dom</span> <span class="id" title="var">G</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">in_witness</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#wf_search_wf_ge_1"><span class="id" title="lemma">wf_search_wf_ge_1</span></a> <span class="id" title="var">H10</span> <span class="id" title="var">H9</span> <span class="id" title="var">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#wf_search_wf_ge_1"><span class="id" title="lemma">wf_search_wf_ge_1</span></a> <span class="id" title="var">H8</span> <span class="id" title="var">H7</span> <span class="id" title="var">H9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> (<a class="idref" href="Step.html#exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> <span class="id" title="var">H</span>) <span class="id" title="var">Wf</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> (<a class="idref" href="Step.html#exposure_preserves_lc"><span class="id" title="lemma">exposure_preserves_lc</span></a> <span class="id" title="var">H</span>) <span class="id" title="var">Lc</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_measure_decrease"><span class="id" title="lemma">exposure_measure_decrease</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> ?<span class="id" title="var">G</span> <span class="id" title="constructor">nil</span> ?<span class="id" title="var">T</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <span class="id" title="var">G</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#wf_search_weaken"><span class="id" title="lemma">wf_search_weaken</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="downcast_e_measure_decrease"><span class="id" title="lemma">downcast_e_measure_decrease</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Step.html#69a586052f71b0a79324cfcc591e0d2a"><span class="id" title="notation">&searrow;</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="method">fv</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> (<a class="idref" href="Definitions.html#typ_sel"><span class="id" title="constructor">typ_sel</span></a> <a class="idref" href="Step.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="notation">&gt;</span> <a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#T"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destr</span> <span class="id" title="var">on</span> <a class="idref" href="Step.html#downcast_e"><span class="id" title="inductive">downcast_e</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">a</span> <span class="id" title="notation">`</span><span class="id" title="notation">in</span><span class="id" title="notation">`</span> <span class="id" title="definition">dom</span> <span class="id" title="var">G</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">fsetdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">in_witness</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_conjs</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#wf_search_wf_ge_1"><span class="id" title="lemma">wf_search_wf_ge_1</span></a> <span class="id" title="var">H10</span> <span class="id" title="var">H9</span> <span class="id" title="var">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Step.html#wf_search_wf_ge_1"><span class="id" title="lemma">wf_search_wf_ge_1</span></a> <span class="id" title="var">H8</span> <span class="id" title="var">H7</span> <span class="id" title="var">H9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Misc.html#wf_deapp"><span class="id" title="lemma">wf_deapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> (<a class="idref" href="Step.html#exposure_preserves_wf"><span class="id" title="lemma">exposure_preserves_wf</span></a> <span class="id" title="var">H</span>) <span class="id" title="var">Wf</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rec_pose</span> (<a class="idref" href="Step.html#exposure_preserves_lc"><span class="id" title="lemma">exposure_preserves_lc</span></a> <span class="id" title="var">H</span>) <span class="id" title="var">Lc</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#exposure_measure_decrease"><span class="id" title="lemma">exposure_measure_decrease</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Step.html#wf_search_lookup"><span class="id" title="lemma">wf_search_lookup</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Misc.html#wf_uniq"><span class="id" title="lemma">wf_uniq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_env</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Step.html#wf_search_impl"><span class="id" title="definition">wf_search_impl</span></a> ?<span class="id" title="var">G</span> <span class="id" title="constructor">nil</span> ?<span class="id" title="var">T</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="Step.html#wf_search"><span class="id" title="definition">wf_search</span></a> <span class="id" title="var">G</span> <span class="id" title="var">T</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#wf_search_weaken"><span class="id" title="lemma">wf_search_weaken</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="tactic">solve</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="stp_subty_terminates"><span class="id" title="definition">stp_subty_terminates</span></a> <span class="id" title="var">L</span> <span class="id" title="var">G</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span> (<span class="id" title="var">SU</span> : <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">[</span></a> <a class="idref" href="Step.html#L"><span class="id" title="variable">L</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">]</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">⊢</span></a><a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation">s</span></a> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Step.html#d1ab5070c3afc56bcade666474423a6d"><span class="id" title="notation"><:</span></a> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="keyword">struct</span> <span class="id" title="var">SU</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Misc.html#wf_env"><span class="id" title="inductive">wf_env</span></a> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#S"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">fv</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">&subseteq;</span> <span class="id" title="definition">dom</span> <a class="idref" href="Step.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="abbreviation">lc</span> <a class="idref" href="Step.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Step.html#stp_subty_termination"><span class="id" title="inductive">stp_subty_termination</span></a> <a class="idref" href="Step.html#SU"><span class="id" title="variable">SU</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">SU</span>; <span class="id" title="tactic">constructor</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="var">simp</span> <span class="id" title="var">wf_search_impl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#upcast_e_measure_decrease"><span class="id" title="lemma">upcast_e_measure_decrease</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">u</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>. <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Step.html#downcast_e_measure_decrease"><span class="id" title="lemma">downcast_e_measure_decrease</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>. <span class="id" title="var">routine</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">progressive_inversions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Step.html#wf_open_shift"><span class="id" title="lemma">wf_open_shift</span></a>; <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="notation">&lt;[</span>?<span class="id" title="var">T</span><span class="id" title="notation">]&gt;</span>) <span class="id" title="keyword">with</span> <span class="id" title="notation">[</span><span class="id" title="var">T</span><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Step.html#Algorithmic"><span class="id" title="section">Algorithmic</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
